<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tutorial de Game Hacking utilizando Cheat Engine | Blog do GRIS</title>
<meta name=keywords content="Game Hacking,Engenharia Reversa"><meta name=description content="Aprender como utilizar o Cheat Engine para encontrar e manipular endereços de memória de interesse, injeção/remoção de código para mudar o funcionamento do jogo"><meta name=author content="asw4ng"><link rel=canonical href=http://localhost:1313/2024-08-11-tutorial-game-hacking-cheat-engine/><meta name=google-site-verification content="G-YWN8S4BKK0"><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/2024-08-11-tutorial-game-hacking-cheat-engine/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/2024-08-11-tutorial-game-hacking-cheat-engine/"><meta property="og:site_name" content="Blog do GRIS"><meta property="og:title" content="Tutorial de Game Hacking utilizando Cheat Engine"><meta property="og:description" content="Aprender como utilizar o Cheat Engine para encontrar e manipular endereços de memória de interesse, injeção/remoção de código para mudar o funcionamento do jogo"><meta property="og:locale" content="pt"><meta property="og:type" content="article"><meta property="article:published_time" content="2024-08-12T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-12T00:00:00+00:00"><meta property="article:tag" content="Game Hacking"><meta property="article:tag" content="Engenharia Reversa"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Tutorial de Game Hacking utilizando Cheat Engine"><meta name=twitter:description content="Aprender como utilizar o Cheat Engine para encontrar e manipular endereços de memória de interesse, injeção/remoção de código para mudar o funcionamento do jogo"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial de Game Hacking utilizando Cheat Engine","item":"http://localhost:1313/2024-08-11-tutorial-game-hacking-cheat-engine/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tutorial de Game Hacking utilizando Cheat Engine","name":"Tutorial de Game Hacking utilizando Cheat Engine","description":"Aprender como utilizar o Cheat Engine para encontrar e manipular endereços de memória de interesse, injeção/remoção de código para mudar o funcionamento do jogo","keywords":["Game Hacking","Engenharia Reversa"],"articleBody":"Abordaremos neste artigo sobre os princípios fundamentais sobre Game Hacking, ensinando como utilizar o Cheat Engine, um programa clássico para mudar aspectos de um jogo a seu favor.\nSobre Processos Antes de tudo, é bom deixar bem definido sobre o que é um jogo para o computador. Ao abrirmos qualquer programa executável, o sistema operacional cria um novo processo para rodar este programa. Um Processo é, portanto, uma tarefa em execução no computador. Podem ter múltiplos processos rodando ao mesmo tempo, sendo em janelas ou em plano de fundo, e pode se criar vários processos de um mesmo programa.\nSobre Cheat Engine O Cheat Engine é um Memory Scanner. Dado um processo, ele busca na memória RAM que este processo utiliza por determinados valores ou padrões em tempo real. Com isso podemos procurar por endereços de memória interessantes, como a posição do jogador ou a vida de um inimigo. Além disso, o Cheat Engine também possui funcionalidades de Debugger e Auto Assembler, muito úteis para análise e modificação da lógica do jogo.\nNeste post, vamos resolver como exemplo o tutorial que vem junto ao baixar o Game Engine, e desta forma mostrando na prática como usar as ferramentas para hackear.\nSolucionando o Tutorial Padrão (Tutorial-x86_64.exe) Começaremos solucionando todas as 9 etapas do tutorial padrão do Cheat Engine. Este tutorial pode ser aberto tanto pelo executável, que se encontra na pasta do executável do Cheat Engine, quanto no menu help dele aberto:\nEtapa 1: Anexando um Processo Depois de abrir o tutorial, temos que comunicar ao Cheat Engine qual processo ele deve analisar. Para anexar o processo do tutorial, basta clicar no ícone de busca abaixo, ir na aba de processos e escolher aquele com o nome “Tutorial-x86_64.exe”:\nEm geral, podem existir múltiplos processos com o mesmo nome. Isso ocorre com frequência em browsers (cada aba é um processo distinto), mas podem haver processos que rodam em plano de fundo que abrem junto com o processo principal. O que distingue cada um é pelo PID, o número ao lado do nome na tela acima.\nNo caso deste tutorial, somente existe um processo com este nome, portanto podemos selecionar ele e seguir em frente.\nEtapa 2: Escaneando por Valores Conhecidos Nesta Etapa, desejamos mudar o valor da vida que aparece na tela. Para isso, temos que encontrar aonde na memória o valor está sendo guardado. Temos o valor inicial exato da vida, 100. O tutorial sugere que o tipo da variável é de 4-bytes, mas em casos gerais é bem possível não sabermos exatamente o tipo, então vou progredir sem essa informação.\nCom isso, os campos para o primeiro escaneamento ficam:\nValue: 100\rScan Type: Exact Value\rValue Type: All ou 4-bytes\rRealizando então o primeiro escaneamento (clickando no botão ‘First Scan’ acima do campo Value), encontramos vários endereços de memória com o valor 100:\nPara distinguir entre estes inúmeros valores, temos que ver como cada um se comporta e ver diferenças. Vamos utilizar escaneamentos em sequência usando informações que sabemos da vida. Temos no tutorial um botão para reduzir a vida. No caso, foi reduzido 3 pontos de vida, resultando em 97 de vida total. Temos estas duas informações para filtrar a lista de endereços, sabemos que se algum endereço não mudou desta forma não pode ser a variável que queremos.\nNo caso, usamos a informação da vida total e usamos outro escaneamento do tipo ‘Exact Value’ e clickando em Next Scan:\nSomente um sobrou! Muitas vezes não conseguimos filtrar totalmente os endereços de uma vez, para estes casos devemos realizar vários escaneamentos para reduzir a um número aceitável de candidatos.\nClickando duas vezes neste endereço irá mandar ele para a lista de endereços guardados abaixo. Clique duas vezes no valor e o mude para 1000. O botão Next do tutorial deve liberar.\nO texto que se vê e seu valor real são duas variáveis distintas, de tipos diferentes. O texto pode atualizar com o novo valor ou não ao modificar o valor para 1000. Para verificar, force um update do valor pelo programa original, neste caso pelo botão ‘Hit me’ e veja se o valor está levemente menor que o valor que você botou.\nEtapa 3: Escaneando por Valores Desconhecidos Para esta etapa, temos que mudar o valor de uma variável que não sabemos o seu valor. As únicas informações que temos dela são de que seu valor está entre 0 e 500 e que seu valor decresce quando apertado o botão Hit me. O programa também mostra por 1 segundo o quanto decresceu ao apertar o botão.\nPara começar, podemos realizar o primeiro escaneamento de duas formas, uma geral e outra se utilizando das informações dadas:\nGeral:\nValue: ---\rScan Type: Unknown Value\rValue Type: All\rEntre 0 e 500:\nValue: 0 and 500\rScan Type: Value between...\rValue Type: All\rPara escaneamentos seguintes, utilizamos Decreased Value/Decreased Value by… se apertado o botão ou Unchanged Value se feito nada. Achado o endereço correto, mude seu valor para 5000.\nEtapa 4: Floats e Doubles Temos agora que achar dois valores conhecidos, sabendo que eles são dos tipos float e double.\nSobre Números em Ponto Flutuante Ponto Flutuante é uma maneira de se representar números racionais digitalmente, capaz de suportar números decimais e números muito grandes. Estes seguem o formato da notação científica, como $$ 12345 = 1,2345 \\times 10^{4}. $$ Na variável em si, sendo float (4-bytes) ou double (8-bytes), é guardado 3 informações: 1 bit de sinal (S), a mantissa (M) e o expoente (E), de forma que o valor seja dado da forma:\n$$ valor = (-1)^S\\times M\\times 2^E $$\nConfiguração de uma variável float (4-bytes):\nPara achar estes valores, deve-se seguir o passo-a-passo da Etapa 2, com o campo Value Type correspondente.\nEtapa 5: Achando e Removendo Instruções Algo que não foi comentado até agora é que o local onde uma variável é guardada pode mudar ao reiniciar o programa ou até mesmo durante sua execução, fazendo com que tenha que se repetir o processo de procura. Existem duas formas de fazer mudanças no funcionamento do programa que possam ser repetidos caso isto aconteça: mudanças no código e ponteiros com base um endereço estático. Nesta etapa, vamos procurar e modificar uma instrução que reduz o valor desejado.\nApós encontrar o endereço do valor, desejamos encontrar o código que muda o seu valor. Para tal, clique no endereço com o botão direito do mouse e depois na opção ‘Find out what writes to this address’\nIsso vai anexar o Debugger ao processo sendo analisado. Toda vez que alguma instrução acessar a variável ela será listada nesta janela, portanto para achar a instrução que muda o valor só precisamos apertar novamente o botão Change Value. Se tudo estiver correto, irá aparecer uma ou mais instruções como ilustrado a seguir:\nComo só precisamos impedir do botão de mudar o valor, podemos só substituir esta instrução por NOP (No Operation). A forma mais simples é pelo botão Replace. Selecione a instrução desejada, clique no Replace e confirme a ação. Pare o Debugger clicando em Stop no canto inferior direito e veja se o valor não mude ao clicar em Change Value.\nEtapa 6: Ponteiros Na programação, muitas vezes é utilizado variáveis que guardam endereços de outras variáveis. Estas variáveis são chamadas de Ponteiros. Podemos acessar o valor da variável a qual temos o endereço em um ponteiro, acessando de forma indireta. Para achar um ponteiro para uma certa variável, primeiro temos que descobrir o endereço desta. Como temos acesso ao valor exato, podemos seguir o passo-a-passo da Etapa 2.\nCom o endereço correto em mão, clique com o botão direito nele e selecione a opção Find out what access this address para abrir o Debugger:\nIsso significa que as próximas vezes que uma instrução tente acessar este endereço será listado. Mudando o valor da variável, temos estas instruções que aparece listadadas:\nVeja que todas as instruções possuem um termo entre colchetes. Em assembly, ter um registrador como rax significa uma operação sobre ele, mas ter um termo [rax] a instrução opera sobre o endereço com o valor atual deste registrador. Como podemos observar na imagem abaixo, depois da execução da segunda instrução o registrador rdx tem o endereço em Hexadecimal da variável desejada. Poderia ter na instrução um termo do tipo:\n1 mov [rcx+8], eax Neste caso, significa que tem um offset de 8 sendo adicionado ao conteúdo do ponteiro, que devemos levar em conta para achá-lo. No caso do tutorial, o offset é zero, então podemos usar diretamente o endereço da variável. Fazendo um escaneamento de valor exato só que com valor em Hexadecimal (só marcar o quadrado Hex ao lado do campo Value):\nAchamos nosso ponteiro! Mas o Cheat Engine está tratando ele como uma variável de 4-bytes e não como um ponteiro, então devemos consertar isso. Existem duas formas: mudar o tipo do endereço salvo na lista ou adicionar manualmente. Foi escolhido para este tutorial adicionar manualmente. Copie o endereço do ponteiro (No caso temos um endereço estático ‘Tutorial-x86_64.exe+325AD0’) e clique no botão Add Address Manualy, no canto inferior direito acima da lista de endereços salvos. Na nova janela, cole o endereço e selecione a opção Pointer. Se tudo ocorrer corretamente, deve estar mostrando o valor atual da variável ao lado do campo Address, como na imagem a seguir:\nSalve e veja que conseguimos modificar o valor diretamente pelo ponteiro. Para finalizar, mude o valor para 5000, congele o ponteiro selecionando a caixa Active como a imagem abaixo e clique no botão Change Pointer do tutorial.\nEtapa 7: Injeção de Código Injeção de código é uma técnica de forçar o programa a executar seu código em vez do original, geralmente feito substituindo uma instrução por uma instrução jmp para parte de seu código. Neste caso, desejamos que uma parte do código que retira 1 de vida ao apertar o botão aumente 2 de vida ao invés disso. O primeiro passo é encontrar a instrução que faz esta redução.\nApós encontrar o endereço da variável pelo escaneamento Exact Value, clique na opção Find out what writes to this Address e clique novamente no botão Hit me. Com isso achamos a instrução:\nCom a instrução selecionada, clique em Show disassembler e, mantendo a instrução selecionada nesta janela, precione as teclas Ctrl+A para abrir o Auto-Assembler. Utilize o template de Injeção de Código no Auto-Assembler:\nTemos o seguinte código na janela agora:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 alloc(newmem,2048,\"Tutorial-x86_64.exe\"+2DB57) label(returnhere) label(originalcode) label(exit) newmem: //this is allocated memory, you have read,write,execute access //place your code here originalcode: sub dword ptr [rsi+000007E0],01 exit: jmp returnhere \"Tutorial-x86_64.exe\"+2DB57: jmp newmem nop 2 returnhere: O fluxo do código segue:\n\"Tutorial-x86_64.exe\"+2DB57 (Posição original do código anterior) -\u003e newmem -\u003e originalcode -\u003e exit.\rChamo a atenção para o fato de que o código original ainda será executado se nada fizermos. Podemos somar 3 para que +3 -1 = +2, mas também podemos só pular a execução do código original:\n1 2 3 4 5 6 7 8 9 10 newmem: //this is allocated memory, you have read,write,execute access //place your code here add dword ptr [rsi+000007E0],02 jmp exit originalcode: sub dword ptr [rsi+000007E0],01 exit: jmp returnhere Agora só falta aplicar a injeção. Clique no botão Execute e teste se funcionou apertando o botão Hit me.\nEtapa 8: Ponteiros para Ponteiros para Ponteiros para… Nada impede que o endereço apontado por um Ponteiro seja de outro Ponteiro. Na verdade, isso é bem comum. Para chegarmos à base da sequência, teremos que repetir o passo-a-passo da etapa 6 até não conseguirmos mais, possivelmente chegando em um endereço estático.\nDepois de achar o endereço do valor pelo escaneamento de valor exato, analizamos quais instruções acessam tal valor:\nDiferentemente da etapa 6, vemos agora que a instrução acessa nosso valor com um offset de 18 (hexadecimal) no endereço do ponteiro. Portanto, para achar o endereço do ponteiro, temos entender que o valor no ponteiro vai ser 18 menos que o endereço da variável, ou o valor em rsi (LEMBRANDO: os valores vistos dentro dos registradores são os DEPOIS da instrução ser executada. Se a instrução modificar o registrador de interesse, o valor dentro NÃO é confiável).\nProcurando pela memória o valor contido no ponteiro, encontramos seu endereço:\nVamos adicionar o ponteiro na lista de endereços salvos, pelo método manual. Copiando o endereço do ponteiro e marcando a caixa Pointer, temos que adicionar o offset da instrução. Se tudo estiver correto, o valor ao lado do campo Address deve ser igual ao valor da variável:\nSalvando este ponteiro, deve ficar da forma apresentada na imagem abaixo. Se modificar pelo ponteiro, deve modificar a variável também.\nO tutorial nos dá a informação de que a cadeia de ponteiros tem 4 ponteiros, então temos que repetir mais 3 vezes o passo-a-passo. Para não ficar repetindo, será mostrado as janelas de adicionar endereço para cada um dos ponteiros seguintes:\nVeja que os offsets de cada etapa são diferentes. Aperte Add Offset para adicionar mais campos de offset, informando que este ponteiro aponta para mais um ponteiro, a fim de chegar no valor desejado.\nVemos a seguir que o endereço do quarto ponteiro está em verde e tem outro formato. Significa que este endereço é estático e permanecerá igual mesmo reiniciando o programa.\nEsta é o último endereço que precisamos salvar. Se tudo estiver certo, ele ainda deve apontar para o valor desejado. Se sim, mude-o para 5000, congele o ponteiro e clique em Change Pointer.\nEtapa 9: Código compartilhado e Structures Estamos chegando no fim deste tutorial. Falamos na etapa 5 e 7 sobre manipular código, mas uma instrução pode mudar vários endereços além do desejado. Por exemplo, uma mesma função pode ser chamada para reduzir a vida tando do jogador quanto para inimigos. Logo, se retirarmos esta funcionalidade os inimigos se tornam imortais!\nO que queremos, então, é uma forma de direfenciar quando a instrução trata da vida dos aliados e quando trata dos inimigos. É esperado que as variáveis de cada jogador sigam um molde na memória, aliados ou inimigos, que é chamado de estruturas. Nesta etapa, vamos analisar a existência e conteúdos das estruturas de cada jogador, a fim de analisar as diferenças entre times.\nComeçamos achando o endereço da vida de Dave, por escaneamento de valor exato (tipo Float). Descobrindo quais instruções modificam este endereço, descobrimos que existe um ponteiro que com offset 8 acessa a vida de Dave. Para achar a vida dos outros jogadores, vamos tomar proveito que este código é compartilhado e achar todos os endereços que esta intrução acessa:\nReduza a vida de todos os jogadores. Os endereços listados serão as vidas de todos os jogadores, na ordem que a vida foi reduzida:\nAdicione todos estes endereços na lista de endereços salvos e nomeie cada um para diferenciar. Agora vamos analizar a área da memória da estrutura. Sabemos o endereço base das estruturas, sendo os endereços das vidas menos o Offset, 8 em hexadecimal. Clique em Memory View, no lado esquerdo acima da lista de endereços salvos. Na nova janela, vá em Tools-\u003eDissect data/structures:\nAntes de determinar a estrutura, recomendo separar os esdereços base em dois grupos de dois endereços, para facilitar a comparação. Clique em File-\u003eAdd extra address para adicionar novos endereços em um grupo e File-\u003eAdd new group para adicionar um novo grupo.\nClique em Structures-\u003eDefine new structure e, com o campo Guess Field Types marcado, aperte Ok. O Cheat Engine vai fazer o possível para entender qual o tipo de cada endereço de memória, ele pode errar. Por exemplo, o Cheat Engine nos deu esta estrutura:\nVemos alguns endereços que sabemos de cara o que é. No offset 08, temos a vida, como esperado. Além disso, temos os nomes de cada jogador no offset 19. Podemos até supor que o offset 18 tem relação com o tamanho dos nomes, já que bate com os quatro casos. Mas não tem nada muito óbvio que nos diz qual “Time” cada jogador faz parte.\nVemos no offset 58 um ponteiro, que abrindo vemos que aponta para a estrutura do aliado. Temos um loop de ponteiros, então. Por curiosidade, fui abrindo cada ponteiro deste offset e vemos algo interessante:\nUma nova interpretação da estrutura! E com um offset 14 que para aliados é 1 e para inimigos 2. É bem possível que você tenha recebido esta versão ao fazer em casa, mas isso exempla o fato de que o Cheat Engine pode errar ao assumir tipos à endereços, e deve ser levado em conta. É a mesma estrutura, podemos ver este valor na primeira interpretação no ponteiro no offset 10, no formato P-\u003e1XXXXXXX para aliados e P-\u003e2XXXXXXX para inimigos.\nIrei tomar a segunda interpretação como a mais válida. No final, a estrutura fica desta forma:\nCom um offset que determina times, agora só precisamos fazer uma injeção de código que compara este offset para determinar se é para reduzir a vida ou não. Novamente descubra qual instrução escreve em uma das vidas e, com ela selecionada, aperte Show Dissasembler. Com a instrução ainda selecionada na nova janela, pressione Ctrl+A para abrir o Auto-Assemble, use o template de Code Injection e escreva o código a seguir:\nA etapa está feita! Teste se o código está fazendo efeito e clique em Restart game and autoplay.\nCom isso, terminamos o tutorial.\nFechamento Agradeço muito pela sua atenção e espero que lhe tenha inspirado a se aprofundar mais na área de Game Hacking e Engenharia Reversa. Recomendo ver mais posts no Blog do GRIS sobre as áreas, eles devem te esninar ainda mais sobre, só clicar nas Tags.\nVale a pena lembrar que foi ensinado o básico de Cheat Engine, para jogos SEM ANTI-CHEAT. Seja responsável e use estas ferramentas por sua conta e risco.\nReferências https://wiki.cheatengine.org/index.php?title=Tutorials:Cheat_Engine_Tutorial_Guide_x64#Pointer_Scan\rhttps://wiki.cheatengine.org/index.php?title=Tutorials:Videos\rhttps://www.youtube.com/watch?v=Nib69uZJCaA\u0026t=31s\rhttps://www.youtube.com/watch?v=yjdSxL2DWfE\r","wordCount":"2969","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-12T00:00:00Z","dateModified":"2024-08-12T00:00:00Z","author":{"@type":"Person","name":"asw4ng"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/2024-08-11-tutorial-game-hacking-cheat-engine/"},"publisher":{"@type":"Organization","name":"Blog do GRIS","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=Categorias><span>Categorias</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://www.youtube.com/@grisufrj title=Youtube><span>Youtube</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a></div><h1 class="post-title entry-hint-parent">Tutorial de Game Hacking utilizando Cheat Engine</h1><div class=post-description>Aprender como utilizar o Cheat Engine para encontrar e manipular endereços de memória de interesse, injeção/remoção de código para mudar o funcionamento do jogo</div><div class=post-meta><span title='2024-08-12 00:00:00 +0000 UTC'>August 12, 2024</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;2969 words&nbsp;·&nbsp;asw4ng&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/2024-08-11-tutorial-game-hacking-cheat-engine.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>Abordaremos neste artigo sobre os princípios fundamentais sobre Game Hacking, ensinando como utilizar o Cheat Engine, um programa clássico para mudar aspectos de um jogo a seu favor.</p><h3 id=sobre-processos>Sobre Processos<a hidden class=anchor aria-hidden=true href=#sobre-processos>#</a></h3><p>Antes de tudo, é bom deixar bem definido sobre o que é um jogo para o computador. Ao abrirmos qualquer programa executável, o sistema operacional cria um novo processo para rodar este programa. Um <strong>Processo</strong> é, portanto, uma tarefa em execução no computador. Podem ter múltiplos processos rodando ao mesmo tempo, sendo em janelas ou em plano de fundo, e pode se criar vários processos de um mesmo programa.</p><h3 id=sobre-cheat-engine>Sobre Cheat Engine<a hidden class=anchor aria-hidden=true href=#sobre-cheat-engine>#</a></h3><p>O Cheat Engine é um Memory Scanner. Dado um processo, ele busca na memória RAM que este processo utiliza por determinados valores ou padrões em tempo real. Com isso podemos procurar por endereços de memória interessantes, como a posição do jogador ou a vida de um inimigo. Além disso, o Cheat Engine também possui funcionalidades de Debugger e Auto Assembler, muito úteis para análise e modificação da lógica do jogo.</p><p>Neste post, vamos resolver como exemplo o tutorial que vem junto ao baixar o Game Engine, e desta forma mostrando na prática como usar as ferramentas para hackear.</p><h2 id=solucionando-o-tutorial-padrão-tutorial-x86_64exe>Solucionando o Tutorial Padrão (Tutorial-x86_64.exe)<a hidden class=anchor aria-hidden=true href=#solucionando-o-tutorial-padrão-tutorial-x86_64exe>#</a></h2><p>Começaremos solucionando todas as 9 etapas do tutorial padrão do Cheat Engine. Este tutorial pode ser aberto tanto pelo executável, que se encontra na pasta do executável do Cheat Engine, quanto no menu help dele aberto:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Pasta.jpg> <img alt="Figura 2" loading=lazy src=/images/CheatEngine_Tutorial/Help.jpg></p><h3 id=etapa-1-anexando-um-processo>Etapa 1: Anexando um Processo<a hidden class=anchor aria-hidden=true href=#etapa-1-anexando-um-processo>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step1.jpg></p><p>Depois de abrir o tutorial, temos que comunicar ao Cheat Engine qual processo ele deve analisar. Para anexar o processo do tutorial, basta clicar no ícone de busca abaixo, ir na aba de processos e escolher aquele com o nome &ldquo;Tutorial-x86_64.exe&rdquo;:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Welcome.jpg></p><p>Em geral, podem existir múltiplos processos com o mesmo nome. Isso ocorre com frequência em browsers (cada aba é um processo distinto), mas podem haver processos que rodam em plano de fundo que abrem junto com o processo principal. O que distingue cada um é pelo PID, o número ao lado do nome na tela acima.</p><p>No caso deste tutorial, somente existe um processo com este nome, portanto podemos selecionar ele e seguir em frente.</p><h3 id=etapa-2-escaneando-por-valores-conhecidos>Etapa 2: Escaneando por Valores Conhecidos<a hidden class=anchor aria-hidden=true href=#etapa-2-escaneando-por-valores-conhecidos>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step2.jpg></p><p>Nesta Etapa, desejamos mudar o valor da vida que aparece na tela. Para isso, temos que encontrar aonde na memória o valor está sendo guardado. Temos o valor inicial exato da vida, 100. O tutorial sugere que o tipo da variável é de 4-bytes, mas em casos gerais é bem possível não sabermos exatamente o tipo, então vou progredir sem essa informação.</p><p>Com isso, os campos para o primeiro escaneamento ficam:</p><pre><code>Value: 100
Scan Type: Exact Value
Value Type: All ou 4-bytes
</code></pre><p>Realizando então o primeiro escaneamento (clickando no botão &lsquo;First Scan&rsquo; acima do campo <em>Value</em>), encontramos vários endereços de memória com o valor 100:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step2.1.jpg></p><p>Para distinguir entre estes inúmeros valores, temos que ver como cada um se comporta e ver diferenças. Vamos utilizar escaneamentos em sequência usando informações que sabemos da vida. Temos no tutorial um botão para reduzir a vida. No caso, foi reduzido 3 pontos de vida, resultando em 97 de vida total. Temos estas duas informações para filtrar a lista de endereços, sabemos que se algum endereço não mudou desta forma não pode ser a variável que queremos.</p><p>No caso, usamos a informação da vida total e usamos outro escaneamento do tipo &lsquo;Exact Value&rsquo; e clickando em <em>Next Scan</em>:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step2.2.jpg></p><p>Somente um sobrou! Muitas vezes não conseguimos filtrar totalmente os endereços de uma vez, para estes casos devemos realizar vários escaneamentos para reduzir a um número aceitável de candidatos.</p><p>Clickando duas vezes neste endereço irá mandar ele para a lista de endereços guardados abaixo. Clique duas vezes no valor e o mude para 1000. O botão <em>Next</em> do tutorial deve liberar.</p><blockquote><p><em>O texto que se vê e seu valor real são duas variáveis distintas, de tipos diferentes. O texto pode atualizar com o novo valor ou não ao modificar o valor para 1000. Para verificar, force um update do valor pelo programa original, neste caso pelo botão &lsquo;Hit me&rsquo; e veja se o valor está levemente menor que o valor que você botou.</em></p></blockquote><h3 id=etapa-3-escaneando-por-valores-desconhecidos>Etapa 3: Escaneando por Valores Desconhecidos<a hidden class=anchor aria-hidden=true href=#etapa-3-escaneando-por-valores-desconhecidos>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step3.jpg></p><p>Para esta etapa, temos que mudar o valor de uma variável que não sabemos o seu valor. As únicas informações que temos dela são de que seu valor está entre 0 e 500 e que seu valor decresce quando apertado o botão <em>Hit me</em>. O programa também mostra por 1 segundo o quanto decresceu ao apertar o botão.</p><p>Para começar, podemos realizar o primeiro escaneamento de duas formas, uma geral e outra se utilizando das informações dadas:</p><p>Geral:</p><pre><code>Value: ---
Scan Type: Unknown Value
Value Type: All
</code></pre><p>Entre 0 e 500:</p><pre><code>Value: 0 and 500
Scan Type: Value between...
Value Type: All
</code></pre><p>Para escaneamentos seguintes, utilizamos <em>Decreased Value/Decreased Value by&mldr;</em> se apertado o botão ou <em>Unchanged Value</em> se feito nada. Achado o endereço correto, mude seu valor para 5000.</p><h3 id=etapa-4-floats-e-doubles>Etapa 4: Floats e Doubles<a hidden class=anchor aria-hidden=true href=#etapa-4-floats-e-doubles>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step4.jpg></p><p>Temos agora que achar dois valores conhecidos, sabendo que eles são dos tipos float e double.</p><h3 id=sobre-números-em-ponto-flutuante>Sobre Números em Ponto Flutuante<a hidden class=anchor aria-hidden=true href=#sobre-números-em-ponto-flutuante>#</a></h3><p>Ponto Flutuante é uma maneira de se representar números racionais digitalmente, capaz de suportar números decimais e números muito grandes. Estes seguem o formato da notação científica, como $$ 12345 = 1,2345 \times 10^{4}. $$ Na variável em si, sendo float (4-bytes) ou double (8-bytes), é guardado 3 informações: 1 bit de sinal (S), a mantissa (M) e o expoente (E), de forma que o valor seja dado da forma:</p><p>$$
valor = (-1)^S\times M\times 2^E
$$</p><p>Configuração de uma variável float (4-bytes):</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step4.1.jpg></p><p>Para achar estes valores, deve-se seguir o passo-a-passo da Etapa 2, com o campo <em>Value Type</em> correspondente.</p><h3 id=etapa-5-achando-e-removendo-instruções>Etapa 5: Achando e Removendo Instruções<a hidden class=anchor aria-hidden=true href=#etapa-5-achando-e-removendo-instruções>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step5.jpg></p><p>Algo que não foi comentado até agora é que o local onde uma variável é guardada pode mudar ao reiniciar o programa ou até mesmo durante sua execução, fazendo com que tenha que se repetir o processo de procura. Existem duas formas de fazer mudanças no funcionamento do programa que possam ser repetidos caso isto aconteça: mudanças no código e ponteiros com base um endereço estático. Nesta etapa, vamos procurar e modificar uma instrução que reduz o valor desejado.</p><p>Após encontrar o endereço do valor, desejamos encontrar o código que muda o seu valor. Para tal, clique no endereço com o botão direito do mouse e depois na opção &lsquo;<em>Find out what writes to this address</em>&rsquo;</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step5.1.jpg></p><p>Isso vai anexar o Debugger ao processo sendo analisado. Toda vez que alguma instrução acessar a variável ela será listada nesta janela, portanto para achar a instrução que muda o valor só precisamos apertar novamente o botão <em>Change Value</em>. Se tudo estiver correto, irá aparecer uma ou mais instruções como ilustrado a seguir:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step5.2.jpg></p><p>Como só precisamos impedir do botão de mudar o valor, podemos só substituir esta instrução por NOP (No Operation). A forma mais simples é pelo botão <em>Replace</em>. Selecione a instrução desejada, clique no <em>Replace</em> e confirme a ação. Pare o Debugger clicando em <em>Stop</em> no canto inferior direito e veja se o valor não mude ao clicar em <em>Change Value</em>.</p><h3 id=etapa-6-ponteiros>Etapa 6: Ponteiros<a hidden class=anchor aria-hidden=true href=#etapa-6-ponteiros>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.jpg></p><p>Na programação, muitas vezes é utilizado variáveis que guardam endereços de outras variáveis. Estas variáveis são chamadas de <strong>Ponteiros</strong>. Podemos acessar o valor da variável a qual temos o endereço em um ponteiro, acessando de forma indireta. Para achar um ponteiro para uma certa variável, primeiro temos que descobrir o endereço desta. Como temos acesso ao valor exato, podemos seguir o passo-a-passo da Etapa 2.</p><p>Com o endereço correto em mão, clique com o botão direito nele e selecione a opção <em>Find out what access this address</em> para abrir o Debugger:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.0.jpg></p><p>Isso significa que as próximas vezes que uma instrução tente acessar este endereço será listado. Mudando o valor da variável, temos estas instruções que aparece listadadas:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.1.jpg></p><p>Veja que todas as instruções possuem um termo entre colchetes. Em assembly, ter um registrador como rax significa uma operação sobre ele, mas ter um termo [rax] a instrução opera sobre o endereço com o valor atual deste registrador. Como podemos observar na imagem abaixo, <strong>depois da execução</strong> da segunda instrução o registrador rdx tem o endereço em Hexadecimal da variável desejada. Poderia ter na instrução um termo do tipo:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-s data-lang=s><span class=line><span class=cl>	<span class=n>mov</span> <span class=n>[rcx</span><span class=m>+8</span><span class=n>]</span><span class=p>,</span> <span class=n>eax</span>
</span></span></code></pre></td></tr></table></div></div><p>Neste caso, significa que tem um offset de 8 sendo adicionado ao conteúdo do ponteiro, que devemos levar em conta para achá-lo. No caso do tutorial, o offset é zero, então podemos usar diretamente o endereço da variável. Fazendo um escaneamento de valor exato só que com valor em Hexadecimal (só marcar o quadrado <em>Hex</em> ao lado do campo <em>Value</em>):</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.2.jpg></p><p>Achamos nosso ponteiro! Mas o Cheat Engine está tratando ele como uma variável de 4-bytes e não como um ponteiro, então devemos consertar isso. Existem duas formas: mudar o tipo do endereço salvo na lista ou adicionar manualmente. Foi escolhido para este tutorial adicionar manualmente. Copie o endereço do ponteiro (No caso temos um endereço estático &lsquo;Tutorial-x86_64.exe+325AD0&rsquo;) e clique no botão <em>Add Address Manualy</em>, no canto inferior direito acima da lista de endereços salvos. Na nova janela, cole o endereço e selecione a opção <em>Pointer</em>. Se tudo ocorrer corretamente, deve estar mostrando o valor atual da variável ao lado do campo Address, como na imagem a seguir:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.3.jpg></p><p>Salve e veja que conseguimos modificar o valor diretamente pelo ponteiro. Para finalizar, mude o valor para 5000, congele o ponteiro selecionando a caixa <em>Active</em> como a imagem abaixo e clique no botão <em>Change Pointer</em> do tutorial.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step6.4.jpg></p><h3 id=etapa-7-injeção-de-código>Etapa 7: Injeção de Código<a hidden class=anchor aria-hidden=true href=#etapa-7-injeção-de-código>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step7.jpg></p><p>Injeção de código é uma técnica de forçar o programa a executar seu código em vez do original, geralmente feito substituindo uma instrução por uma instrução <em>jmp</em> para parte de seu código. Neste caso, desejamos que uma parte do código que retira 1 de vida ao apertar o botão aumente 2 de vida ao invés disso. O primeiro passo é encontrar a instrução que faz esta redução.</p><p>Após encontrar o endereço da variável pelo escaneamento <em>Exact Value</em>, clique na opção <em>Find out what writes to this Address</em> e clique novamente no botão <em>Hit me</em>. Com isso achamos a instrução:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step7.1.jpg></p><p>Com a instrução selecionada, clique em <em>Show disassembler</em> e, mantendo a instrução selecionada nesta janela, precione as teclas Ctrl+A para abrir o Auto-Assembler. Utilize o template de Injeção de Código no Auto-Assembler:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step7.2.jpg></p><p>Temos o seguinte código na janela agora:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-s data-lang=s><span class=line><span class=cl><span class=nf>alloc</span><span class=p>(</span><span class=n>newmem</span><span class=p>,</span><span class=m>2048</span><span class=p>,</span><span class=s>&#34;Tutorial-x86_64.exe&#34;</span><span class=m>+2</span><span class=n>DB57</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=nf>label</span><span class=p>(</span><span class=n>returnhere</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>label</span><span class=p>(</span><span class=n>originalcode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nf>label</span><span class=p>(</span><span class=n>exit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>newmem</span><span class=o>:</span> <span class=o>//</span><span class=n>this</span> <span class=n>is</span> <span class=n>allocated</span> <span class=n>memory</span><span class=p>,</span> <span class=n>you</span> <span class=n>have</span> <span class=n>read</span><span class=p>,</span><span class=n>write</span><span class=p>,</span><span class=n>execute</span> <span class=n>access</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=n>place</span> <span class=n>your</span> <span class=n>code</span> <span class=n>here</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>originalcode</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=n>sub</span> <span class=n>dword</span> <span class=n>ptr</span> <span class=n>[rsi</span><span class=m>+000007E0</span><span class=n>]</span><span class=p>,</span><span class=m>01</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>exit</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=n>jmp</span> <span class=n>returnhere</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s>&#34;Tutorial-x86_64.exe&#34;</span><span class=m>+2</span><span class=n>DB57</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=n>jmp</span> <span class=n>newmem</span>
</span></span><span class=line><span class=cl><span class=n>nop</span> <span class=m>2</span>
</span></span><span class=line><span class=cl><span class=n>returnhere</span><span class=o>:</span>
</span></span></code></pre></td></tr></table></div></div><p>O fluxo do código segue:</p><pre><code>&quot;Tutorial-x86_64.exe&quot;+2DB57 (Posição original do código anterior) -&gt; newmem -&gt; originalcode -&gt; exit.
</code></pre><p>Chamo a atenção para o fato de que o código original ainda será executado se nada fizermos. Podemos somar 3 para que +3 -1 = +2, mas também podemos só pular a execução do código original:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-s data-lang=s><span class=line><span class=cl><span class=n>newmem</span><span class=o>:</span> <span class=o>//</span><span class=n>this</span> <span class=n>is</span> <span class=n>allocated</span> <span class=n>memory</span><span class=p>,</span> <span class=n>you</span> <span class=n>have</span> <span class=n>read</span><span class=p>,</span><span class=n>write</span><span class=p>,</span><span class=n>execute</span> <span class=n>access</span>
</span></span><span class=line><span class=cl><span class=o>//</span><span class=n>place</span> <span class=n>your</span> <span class=n>code</span> <span class=n>here</span>
</span></span><span class=line><span class=cl><span class=n>add</span> <span class=n>dword</span> <span class=n>ptr</span> <span class=n>[rsi</span><span class=m>+000007E0</span><span class=n>]</span><span class=p>,</span><span class=m>02</span>
</span></span><span class=line><span class=cl><span class=n>jmp</span> <span class=n>exit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>originalcode</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=n>sub</span> <span class=n>dword</span> <span class=n>ptr</span> <span class=n>[rsi</span><span class=m>+000007E0</span><span class=n>]</span><span class=p>,</span><span class=m>01</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>exit</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=n>jmp</span> <span class=n>returnhere</span>
</span></span></code></pre></td></tr></table></div></div><p>Agora só falta aplicar a injeção. Clique no botão <em>Execute</em> e teste se funcionou apertando o botão <em>Hit me</em>.</p><h3 id=etapa-8-ponteiros-para-ponteiros-para-ponteiros-para>Etapa 8: Ponteiros para Ponteiros para Ponteiros para&mldr;<a hidden class=anchor aria-hidden=true href=#etapa-8-ponteiros-para-ponteiros-para-ponteiros-para>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.jpg></p><p>Nada impede que o endereço apontado por um Ponteiro seja de outro Ponteiro. Na verdade, isso é bem comum. Para chegarmos à base da sequência, teremos que repetir o passo-a-passo da etapa 6 até não conseguirmos mais, possivelmente chegando em um endereço estático.</p><p>Depois de achar o endereço do valor pelo escaneamento de valor exato, analizamos quais instruções acessam tal valor:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.1.jpg></p><p>Diferentemente da etapa 6, vemos agora que a instrução acessa nosso valor com um offset de 18 (hexadecimal) no endereço do ponteiro. Portanto, para achar o endereço do ponteiro, temos entender que o valor no ponteiro vai ser 18 menos que o endereço da variável, ou o valor em rsi (<strong>LEMBRANDO:</strong> os valores vistos dentro dos registradores são os DEPOIS da instrução ser executada. Se a instrução modificar o registrador de interesse, o valor dentro NÃO é confiável).</p><p>Procurando pela memória o valor contido no ponteiro, encontramos seu endereço:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.2.jpg></p><p>Vamos adicionar o ponteiro na lista de endereços salvos, pelo método manual. Copiando o endereço do ponteiro e marcando a caixa <em>Pointer</em>, temos que adicionar o offset da instrução. Se tudo estiver correto, o valor ao lado do campo <em>Address</em> deve ser igual ao valor da variável:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.3.jpg></p><p>Salvando este ponteiro, deve ficar da forma apresentada na imagem abaixo. Se modificar pelo ponteiro, deve modificar a variável também.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.4.jpg></p><p>O tutorial nos dá a informação de que a cadeia de ponteiros tem 4 ponteiros, então temos que repetir mais 3 vezes o passo-a-passo. Para não ficar repetindo, será mostrado as janelas de adicionar endereço para cada um dos ponteiros seguintes:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.5.jpg></p><p>Veja que os offsets de cada etapa são diferentes. Aperte <em>Add Offset</em> para adicionar mais campos de offset, informando que este ponteiro aponta para mais um ponteiro, a fim de chegar no valor desejado.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.6.jpg></p><p>Vemos a seguir que o endereço do quarto ponteiro está em verde e tem outro formato. Significa que este endereço é estático e permanecerá igual mesmo reiniciando o programa.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.7.jpg></p><p>Esta é o último endereço que precisamos salvar. Se tudo estiver certo, ele ainda deve apontar para o valor desejado. Se sim, mude-o para 5000, congele o ponteiro e clique em <em>Change Pointer</em>.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step8.8.jpg></p><h3 id=etapa-9-código-compartilhado-e-structures>Etapa 9: Código compartilhado e Structures<a hidden class=anchor aria-hidden=true href=#etapa-9-código-compartilhado-e-structures>#</a></h3><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.jpg></p><p>Estamos chegando no fim deste tutorial. Falamos na etapa 5 e 7 sobre manipular código, mas uma instrução pode mudar vários endereços além do desejado. Por exemplo, uma mesma função pode ser chamada para reduzir a vida tando do jogador quanto para inimigos. Logo, se retirarmos esta funcionalidade os inimigos se tornam imortais!</p><p>O que queremos, então, é uma forma de direfenciar quando a instrução trata da vida dos aliados e quando trata dos inimigos. É esperado que as variáveis de cada jogador sigam um molde na memória, aliados ou inimigos, que é chamado de estruturas. Nesta etapa, vamos analisar a existência e conteúdos das estruturas de cada jogador, a fim de analisar as diferenças entre times.</p><p>Começamos achando o endereço da vida de Dave, por escaneamento de valor exato (tipo Float). Descobrindo quais instruções modificam este endereço, descobrimos que existe um ponteiro que com offset 8 acessa a vida de Dave. Para achar a vida dos outros jogadores, vamos tomar proveito que este código é compartilhado e achar todos os endereços que esta intrução acessa:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.1.jpg></p><p>Reduza a vida de todos os jogadores. Os endereços listados serão as vidas de todos os jogadores, na ordem que a vida foi reduzida:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.2.jpg></p><p>Adicione todos estes endereços na lista de endereços salvos e nomeie cada um para diferenciar. Agora vamos analizar a área da memória da estrutura. Sabemos o endereço base das estruturas, sendo os endereços das vidas menos o Offset, 8 em hexadecimal. Clique em <em>Memory View</em>, no lado esquerdo acima da lista de endereços salvos. Na nova janela, vá em <em>Tools->Dissect data/structures</em>:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.3.jpg></p><p>Antes de determinar a estrutura, recomendo separar os esdereços base em dois grupos de dois endereços, para facilitar a comparação. Clique em <em>File->Add extra address</em> para adicionar novos endereços em um grupo e <em>File->Add new group</em> para adicionar um novo grupo.</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.4.jpg></p><p>Clique em <em>Structures->Define new structure</em> e, com o campo <em>Guess Field Types</em> marcado, aperte Ok. O Cheat Engine vai fazer o possível para entender qual o tipo de cada endereço de memória, ele pode errar. Por exemplo, o Cheat Engine nos deu esta estrutura:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.5.1.jpg></p><p>Vemos alguns endereços que sabemos de cara o que é. No offset 08, temos a vida, como esperado. Além disso, temos os nomes de cada jogador no offset 19. Podemos até supor que o offset 18 tem relação com o tamanho dos nomes, já que bate com os quatro casos. Mas não tem nada muito óbvio que nos diz qual &ldquo;Time&rdquo; cada jogador faz parte.</p><p>Vemos no offset 58 um ponteiro, que abrindo vemos que aponta para a estrutura do aliado. Temos um loop de ponteiros, então. Por curiosidade, fui abrindo cada ponteiro deste offset e vemos algo interessante:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.5.2.jpg></p><p>Uma nova interpretação da estrutura! E com um offset 14 que para aliados é 1 e para inimigos 2. É bem possível que você tenha recebido esta versão ao fazer em casa, mas isso exempla o fato de que o Cheat Engine pode errar ao assumir tipos à endereços, e deve ser levado em conta. É a mesma estrutura, podemos ver este valor na primeira interpretação no ponteiro no offset 10, no formato P->1XXXXXXX para aliados e P->2XXXXXXX para inimigos.</p><p>Irei tomar a segunda interpretação como a mais válida. No final, a estrutura fica desta forma:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.5.jpg></p><p>Com um offset que determina times, agora só precisamos fazer uma injeção de código que compara este offset para determinar se é para reduzir a vida ou não. Novamente descubra qual instrução escreve em uma das vidas e, com ela selecionada, aperte <em>Show Dissasembler</em>. Com a instrução ainda selecionada na nova janela, pressione Ctrl+A para abrir o Auto-Assemble, use o template de Code Injection e escreva o código a seguir:</p><p><img alt=Figura loading=lazy src=/images/CheatEngine_Tutorial/Step9.6.jpg></p><p>A etapa está feita! Teste se o código está fazendo efeito e clique em <em>Restart game and autoplay</em>.</p><p>Com isso, terminamos o tutorial.</p><h2 id=fechamento>Fechamento<a hidden class=anchor aria-hidden=true href=#fechamento>#</a></h2><p>Agradeço muito pela sua atenção e espero que lhe tenha inspirado a se aprofundar mais na área de Game Hacking e Engenharia Reversa. Recomendo ver mais posts no Blog do GRIS sobre as áreas, eles devem te esninar ainda mais sobre, só clicar nas Tags.</p><blockquote><p>Vale a pena lembrar que foi ensinado o básico de Cheat Engine, para jogos <strong>SEM ANTI-CHEAT</strong>. Seja responsável e use estas ferramentas por sua conta e risco.</p></blockquote><h2 id=referências>Referências<a hidden class=anchor aria-hidden=true href=#referências>#</a></h2><pre><code>https://wiki.cheatengine.org/index.php?title=Tutorials:Cheat_Engine_Tutorial_Guide_x64#Pointer_Scan

https://wiki.cheatengine.org/index.php?title=Tutorials:Videos

https://www.youtube.com/watch?v=Nib69uZJCaA&amp;t=31s

https://www.youtube.com/watch?v=yjdSxL2DWfE
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/game-hacking/>Game Hacking</a></li><li><a href=http://localhost:1313/tags/engenharia-reversa/>Engenharia Reversa</a></li></ul><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on x" href="https://x.com/intent/tweet/?text=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine&amp;url=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f&amp;hashtags=GameHacking%2cEngenhariaReversa"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f&amp;title=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine&amp;summary=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine&amp;source=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f&title=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on whatsapp" href="https://api.whatsapp.com/send?text=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine%20-%20http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on telegram" href="https://telegram.me/share/url?text=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine&amp;url=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Tutorial de Game Hacking utilizando Cheat Engine on ycombinator" href="https://news.ycombinator.com/submitlink?t=Tutorial%20de%20Game%20Hacking%20utilizando%20Cheat%20Engine&u=http%3a%2f%2flocalhost%3a1313%2f2024-08-11-tutorial-game-hacking-cheat-engine%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Blog do GRIS</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>